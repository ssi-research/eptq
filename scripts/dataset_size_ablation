#!/bin/bash

function_name () {
  # $1 define the dataset size
  # $2 number of iterations
  for N in 1 2 3 4 5
  do
     nc run -C GPUALG python main.py --norm_loss --model_name resnet18 --gptq --temperature_learning --disable_activation_quantization --n_images $1 --gptq_num_calibration_iter $2  --lr 0.05 --lr_rest 1e-4 --bias_learning --weights_nbits 4 --jacobian_weights --group $1-$2
#    echo $1-$2
  done
}
for DATASET in 128 256 512 1024 2048
do
    function_name $DATASET 20000
done

for ITERATION in 5000 10000 15000 20000 30000 40000
do
  function_name 1024 $ITERATION
done